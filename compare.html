<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>比較とまとめ | JSるーぷますたー</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

</head>

<body>
    <header>
        <nav>
            <a href="index.html" class="logo">forとforEachの解説</a>
            <ul class="nav-links">
                <li><a href="index.html">Top</a></li>
                <li><a href="fundamentals.html">基礎知識</a></li>
                <li><a href="for-loop.html">for文</a></li>
                <li><a href="foreach.html">forEach</a></li>
                <li><a href="compare.html" class="active">比較とまとめ</a></li>
            </ul>
        </nav>
    </header>

    <div class="page-layout">
        <main>
            <h1>比較とまとめ</h1>

            <section class="comparison">
                <h2>1. for vs forEach 比較表</h2>
                <p>これまで学んだことを表にまとめました。<br>
                    「どっちだっけ？」と迷ったらここを見返してください。</p>

                <table>
                    <thead>
                        <tr>
                            <th class="col-item">項目</th>
                            <th class="col-for">for文 (構文)</th>
                            <th class="col-foreach">forEach (メソッド)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>分類</strong></td>
                            <td>
                                <strong>構文</strong><br>
                                言語の基本機能。
                            </td>
                            <td>
                                <strong>メソッド</strong><br>
                                配列の機能。
                            </td>
                        </tr>
                        <tr>
                            <td><strong>記述</strong></td>
                            <td>
                                <strong>詳細な指定が必要</strong><br>
                                開始値・終了条件・増減値を記述する。
                            </td>
                            <td>
                                <strong>簡潔</strong><br>
                                コールバック関数を渡すのみ。
                            </td>
                        </tr>
                        <tr>
                            <td><strong>中断<br>(break)</strong></td>
                            <td>
                                <span style="color: green; font-weight: bold;">可能</span><br>
                                <code>break</code> で終了できる。
                            </td>
                            <td>
                                <span style="color: red; font-weight: bold;">不可</span><br>
                                最後まで実行される。
                            </td>
                        </tr>
                        <tr>
                            <td><strong>非同期<br>(await)</strong></td>
                            <td>
                                <strong>待機可能</strong><br>
                                <code>await</code> で処理を待てる。
                            </td>
                            <td>
                                <strong>待機不可</strong><br>
                                待たずに次へ進む。
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section class="flowchart">
                <h2>2. 使い分けフローチャート</h2>
                <p>条件に合わせて選択してください。</p>

                <div class="flowchart-container">
                    <!-- Step 1 -->
                    <div class="flowchart-step">
                        Q1. ループを途中で止める (break) 必要がある？
                    </div>

                    <div class="flowchart-arrow">⬇</div>

                    <div class="flowchart-branch">
                        <!-- YES Path -->
                        <div class="flowchart-option">
                            <span class="flowchart-label label-yes">YES</span>
                            <div class="flowchart-arrow">⬇</div>
                            <div class="flowchart-answer answer-for">
                                <span class="answer-title">👉 for 文</span>
                            </div>
                        </div>

                        <!-- NO Path -->
                        <div class="flowchart-option">
                            <span class="flowchart-label label-no">NO</span>
                            <div class="flowchart-arrow">⬇</div>

                            <!-- Step 2 -->
                            <div class="flowchart-step">
                                Q2. 非同期処理 (await) を待機する必要がある？
                            </div>

                            <div class="flowchart-arrow">⬇</div>

                            <div class="flowchart-branch">
                                <!-- YES Path -->
                                <div class="flowchart-option">
                                    <span class="flowchart-label label-yes">YES</span>
                                    <div class="flowchart-arrow">⬇</div>
                                    <div class="flowchart-answer answer-for">
                                        <span class="answer-title">👉 for 文</span>
                                    </div>
                                </div>

                                <!-- NO Path -->
                                <div class="flowchart-option">
                                    <span class="flowchart-label label-no">NO</span>
                                    <div class="flowchart-arrow">⬇</div>
                                    <div class="flowchart-answer answer-foreach">
                                        <span class="answer-title">👉 forEach</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="quiz">
                <h2>3. 確認クイズ</h2>
                <p>理解度を確認してください。</p>
                <div class="quiz-container">
                    <div class="quiz-item" id="q1">
                        <p><strong>Q1. 配列の要素を順番に表示する場合、記述が簡潔なのは？</strong></p>
                        <div class="quiz-options">
                            <div class="option-group">
                                <input type="radio" name="q1" id="q1-for" value="for">
                                <label for="q1-for" class="option-card">for文</label>
                            </div>
                            <div class="option-group">
                                <input type="radio" name="q1" id="q1-foreach" value="foreach">
                                <label for="q1-foreach" class="option-card">forEach</label>
                            </div>
                        </div>
                        <div class="result-message"></div>
                    </div>

                    <div class="quiz-item" id="q2">
                        <p><strong>Q2. ループを途中で中断したい場合、使用できるのは？</strong></p>
                        <div class="quiz-options">
                            <div class="option-group">
                                <input type="radio" name="q2" id="q2-for" value="for">
                                <label for="q2-for" class="option-card">for文</label>
                            </div>
                            <div class="option-group">
                                <input type="radio" name="q2" id="q2-foreach" value="foreach">
                                <label for="q2-foreach" class="option-card">forEach</label>
                            </div>
                        </div>
                        <div class="result-message"></div>
                    </div>

                    <div class="quiz-item" id="q3">
                        <p><strong>Q3. forEachの中で `await` は機能しますか？</strong></p>
                        <div class="quiz-options">
                            <div class="option-group">
                                <input type="radio" name="q3" id="q3-yes" value="yes">
                                <label for="q3-yes" class="option-card">機能する</label>
                            </div>
                            <div class="option-group">
                                <input type="radio" name="q3" id="q3-no" value="no">
                                <label for="q3-no" class="option-card">機能しない</label>
                            </div>
                        </div>
                        <div class="result-message"></div>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <button id="checkQuiz" class="btn btn-large">答え合わせ</button>
                    </div>
                </div>
            </section>

            <div style="margin-top: 40px; text-align: center;">
                <a href="index.html" class="btn btn-large">トップに戻る</a>
            </div>
        </main>
    </div>

    <!-- Custom Modal -->
    <div class="modal-overlay" id="quizModal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-message" id="modalMessage"></div>
            <button class="btn" id="closeModal">閉じる</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 forとforEachの解説</p>
    </footer>

    <script src="js/script.js"></script>
    <script>
        const modal = document.getElementById('quizModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const closeModal = document.getElementById('closeModal');

        // Close modal function
        const hideModal = () => {
            modal.classList.remove('active');
        };

        closeModal.addEventListener('click', hideModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) hideModal();
        });

        document.getElementById('checkQuiz').addEventListener('click', () => {
            // Answers
            const answers = {
                q1: 'foreach',
                q2: 'for',
                q3: 'no'
            };

            let correctCount = 0;

            for (const [questionId, correctAnswer] of Object.entries(answers)) {
                const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                const resultDiv = document.querySelector(`#${questionId} .result-message`);

                resultDiv.style.display = 'block';
                resultDiv.className = 'result-message'; // reset

                if (selected && selected.value === correctAnswer) {
                    resultDiv.textContent = '正解です。';
                    resultDiv.classList.add('correct');
                    correctCount++;
                } else {
                    resultDiv.textContent = '不正解です。';
                    resultDiv.classList.add('incorrect');
                }
            }

            // Show Custom Modal instead of alert
            if (correctCount === 3) {
                modalTitle.textContent = '全問正解';
                modalMessage.textContent = 'すべての問題に正解しました。';
            } else {
                modalTitle.textContent = '結果';
                modalMessage.textContent = `${correctCount}問正解です。`;
                modalMessage.innerHTML = `${correctCount}問正解です。`;
            }

            modal.classList.add('active');
        });
    </script>
</body>

</html>